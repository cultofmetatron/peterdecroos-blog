
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Thorax is Awesome - console.blog( this.thought )</title>
	<meta name="author" content="Peter de Croos">

	
	<meta name="description" content="I like Backbone.js alot. it&#8217;s a fantastic utlity library for building your own
best of breed javascript applications.Its much more configurable &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="console.blog( this.thought )" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">console.blog( this.thought )</a></h1>
<nav id="main-nav"><ul class="main">
  <li><a href="/">Blog</a></li>
  <li><a href="/about-me">About</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
  <li><a href="/">Blog</a></li>
  <li><a href="/about-me">About</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:blog.peterdecroos.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		
		<a class="github" href="https://github.com/cultofmetatron" title="GitHub">GitHub</a>
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:blog.peterdecroos.com">
	</form>
</nav>

</header>
	
	<div id="content" class="inner"><article class="post">
	<h1 class="title">Thorax Is Awesome</h1>
	<div class="entry-content"><p>I like Backbone.js alot. it&#8217;s a fantastic utlity library for building your own
best of breed javascript applications.Its much more configurable than angular.js
or ember.js. (both of which make alot of assumptions about the nature of your app
which may or may not lead to alot of pain when working with a legacy codebase.) while
you certainly won&#8217;t be cranking out apps as quickly as you would in more magical frameworksm
Backbone gives you enough to get started but stays slim in features to avoid stepping
on your toes. Backbone is the fixed gear bike of frontend javascript frameworks.</p>

<p>While I reccomend anyone new to backbone build a few projects to learn it. In practice,
I don&#8217;t reccomend using backbone solely if you are building out a full mvc system. Its missing
a few really important features that you would have to implement yourself.</p>

<h2>Enter Thorax</h2>

<p>In the world of backbone extensions, Marionette, Thorax, and Chaplain. I haven&#8217;t looked at
chapplain and I found Marionette a lil heavy for my needs. Thorax on the other hand was a
breath of fresh air. One big pro is I found was its built in integration of
<a href="http://handlebarsjs.com">handlebars.js</a> templates.</p>

<h4>Out of the box render() that works</h4>

<p>Backbone.View&#8217;s default render method is a noop(), (ie: function() {}).
Backbone&#8217;s author&#8217;s intend for you to write your own render function which
sets its instance&#8217;s <em>el</em> property to your view&#8217;s generated represntation of
the model&#8217;s data. Backbone avoids adding in this feature to keep it agnostic to
your templating system.</p>

<p>Since Thorax makes the decision of using handlebars, it can give us a default render()
method thats usable. Instead of a noop(), Thorax.View.render() by default, constucts a
constext object containing all the <em>properties</em> of the view instance and the attributes
of the model.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">//render function, this is what a Thorax render does, </span>
</span><span class='line'><span class="c1">// *this* resolves to the thorax instance</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">render</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">//get the attributes of the property</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">properties</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">property</span> <span class="k">in</span> <span class="k">this</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">properties</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">property</span><span class="p">];</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>  <span class="c1">//underscore.js&#39;s extend</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">properties</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">instanceProperties</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">attributes</span><span class="p">);</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="nx">properties</span><span class="p">));</span>
</span><span class='line'>  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>By default, properties of the view insance get passed to the template
but not the functions. What if we want to overide this?</p>

<p>In the past, I would write view helpers in order to render attributes that required computation.
There&#8217;s a more elegant way using the <em>defineProperty</em> function.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>  <span class="kd">var</span> <span class="nx">peter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Thorax</span><span class="p">.</span><span class="nx">Model</span><span class="p">({</span>
</span><span class='line'>    <span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;Peter&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">lastName</span><span class="o">:</span>  <span class="s1">&#39;de Croos&#39;</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">PersonView</span> <span class="o">=</span> <span class="nx">Thorax</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
</span><span class='line'>    <span class="nx">template</span><span class="o">:</span> <span class="nx">Handlebars</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="nx">TemplateSource</span><span class="p">),</span>
</span><span class='line'>    <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;fullname&#39;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;firstName&#39;</span><span class="p">)</span><span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;lastName&#39;</span><span class="p">);</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">true</span>
</span><span class='line'>      <span class="p">});</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">peterView</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PersonView</span><span class="p">({</span>
</span><span class='line'>    <span class="nx">model</span><span class="o">:</span> <span class="nx">peter</span>
</span><span class='line'>  <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>By default, properties defined by <em>defineProperty</em> are not enumerable.</p>

<p>IE: they won&#8217;t show up when you do the <em>for (property in this) {}</em>, Since
thats how thorax&#8217;s render view gets at the attributes, it won&#8217;t show up in the template
either. Luckily that is easy enough to fix by specifying the option
<em>enumerable:true</em></p>

<p>now we have a property we can expose in the template and when handlebars accesses that property,
the fullName function will be accessible in your handlebars templates as a read-only property
without having to register a helper.</p>

<h4>Child view management</h4>

<p>Backbone does nothing to address embedded views. It expects you to write your own logic
for handling child views into the render. As you can imagine, its kind of a pain.
It sounds simple enough in practice but it means that you have to write in logic to check
if a parent view is being removed and recursivly have it descend into all it child views to
undelegate events from the dom. This is a major potential source of javascript memory leaks.
Thorax provides some great helper functions for this. It just wins.</p>

<p>Thorax.Views can be embedded in another view simply by adding it as a property of</p>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-07-05T13:45:00-07:00" pubdate data-updated="true">Jul 5<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/backbone/'>backbone</a>, <a class='category' href='/blog/categories/defineproperty/'>defineProperty</a>, <a class='category' href='/blog/categories/thorax/'>thorax</a>


</div>
	
		<span class="comments"><a href="/blog/2013/07/05/thorax-is-awesome/#disqus_thread">Comments</a></span>
	
</div></article>
<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>

  <div style="float: right" class='angellist_embed' data-user_id='277748'>  <a href='https://angel.co/peter-de-croos?utm_medium=web&utm_campaign=individual_embed&utm_content=277748'></a></div><script type='text/javascript' src='https://angel.co/peter-de-croos/embed/angellist.js'></script>



</div>


<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Peter de Croos

<div>
<a href="https://angel.co/peter-de-croos?follow=1&type=User&id=277748"></a><script src="https://angel.co/javascripts/embed.js" type="text/javascript"></script>
</div>
</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'peterdecroosblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://blog.peterdecroos.com/blog/2013/07/05/thorax-is-awesome/';
        var disqus_url = 'http://blog.peterdecroos.com/blog/2013/07/05/thorax-is-awesome/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-33062340-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>





</body>
</html>
